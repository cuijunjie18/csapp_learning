# 要点

- 首先，通常服务器会运行很长的时间，所以我们必须要包括一个 SIGCHLD 处理程序 ，来回收僵死（zombie）子进程的资源（第 4〜9 行）。因为当 SIGCHLD 处理程序执行时，SIGCHLD 信号是阻塞的，而 Linux 信号是不排队的，所以 SIGCHLD 处理程序必须准备好回收多个僵死子进程的资源。
- 其次，父子进程必须关闭它们各自的 fd（分别为第 33 行和第 30 行）副本。就像我们已经提到过的，这对父进程 而言尤 为重要，它必须关闭它的已 连接描述符，以避免内存泄漏。
- 最后，因为套接字的文件表表项中的引用计数，直到父子进程的 cormfd 都关闭了，到客户端的连接才会终止。